<?php 

    use Embryo\Application\Application as App;
    use Embryo\Application\Facade;

    /**
     * ------------------------------------------------------------
     * SETTINGS	
     * ------------------------------------------------------------
     */
    
    $settings = require_once ROOT_PATH.'boot/settings.php';

    /**
     * ------------------------------------------------------------
     * APPLICATION
     * ------------------------------------------------------------
     */

    $app = new App($settings);

    /**
     * ------------------------------------------------------------
     * SERVICES
     * ------------------------------------------------------------
     */

    require_once ROOT_PATH.'boot/services.php';

    /**
     * ------------------------------------------------------------
     * FACADES
     * ------------------------------------------------------------
     */
    
    Facade::init($app->getContainer());

    /**
     * ------------------------------------------------------------
     * MIDDLEWARE
     * ------------------------------------------------------------
     */
    
    require_once ROOT_PATH.'boot/middleware.php';

    /**
     * ------------------------------------------------------------
     * ROUTES
     * ------------------------------------------------------------
     */

    require_once ROOT_PATH.'routes/app.php';
    require_once ROOT_PATH.'routes/api.php';

    /**
     * ------------------------------------------------------------
     * RUN APPLICATION
     * ------------------------------------------------------------
     */

    return $app;